{
  "runbook_name": "Context_Aware_Recovery_Runbook_V1",
  "mttr_target_seconds": 180,
  "alert_to_action_map": [
    {
      "alert_name": "HighLatency_P99_BackendAPI",
      "threshold_ms": 150,
      "severity": "MEDIUM",
      "protocol": [
        {
          "step_id": 1,
          "action_type": "K8S_SCALE_OUT",
          "target_component": "libral-backend-api",
          "scale_factor": 1
        },
        {
          "step_id": 2,
          "action_type": "CHAOS_EXPERIMENT_RUN",
          "experiment_type": "NETWORK_DELAY",
          "target_component": "libral-backend-api",
          "duration_seconds": 60,
          "condition": "IF_LATENCY_PERSISTS_AFTER_STEP_1"
        }
      ]
    },
    {
      "alert_name": "Postgres_Primary_Down",
      "threshold_seconds": 10,
      "severity": "CRITICAL",
      "protocol": [
        {
          "step_id": 1,
          "action_type": "HA_TRIGGER_FAILOVER",
          "target_component": "libral-postgres-patroni",
          "force": true
        },
        {
          "step_id": 2,
          "action_type": "DRP_PITR_TEST",
          "target_component": "libral-postgres-cluster",
          "target_time": "NOW - 5 MINUTES",
          "condition": "IF_FAILOVER_FAILS"
        }
      ]
    }
  ]
}
